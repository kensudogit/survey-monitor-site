import{r as e,a as s,b as t}from"./vendor-edb5163b.js";import{u as a,L as l,a as r,B as i,R as n,b as c}from"./router-425079c8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var d={exports:{}},o={},x=e,m=Symbol.for("react.element"),h=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,g=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function j(e,s,t){var a,l={},r=null,i=null;for(a in void 0!==t&&(r=""+t),void 0!==s.key&&(r=""+s.key),void 0!==s.ref&&(i=s.ref),s)u.call(s,a)&&!p.hasOwnProperty(a)&&(l[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===l[a]&&(l[a]=s[a]);return{$$typeof:m,type:e,key:r,ref:i,props:l,_owner:g.current}}o.Fragment=h,o.jsx=j,o.jsxs=j,d.exports=o;var b=d.exports,f={},v=s;f.createRoot=v.createRoot,f.hydrateRoot=v.hydrateRoot;const N=e.createContext(),y=()=>{const s=e.useContext(N);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},w=({children:s})=>{const[t,a]=e.useState(null),[l,r]=e.useState(!0);e.useEffect(()=>{const e=localStorage.getItem("survey_monitor_user");e&&a(JSON.parse(e)),r(!1)},[]);const i=e=>!(!e.name||e.name.length<2)&&(!(!e.email||!n(e.email))&&(!(!e.password||e.password.length<8)&&!(!e.age||!e.gender))),n=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),c=e=>btoa(e+"survey_monitor_salt"),d=()=>{const e=localStorage.getItem("survey_monitor_users");return e?JSON.parse(e):[]},o=e=>{const s=d(),t=s.findIndex(s=>s.id===e.id);-1!==t&&(s[t]=e,localStorage.setItem("survey_monitor_users",JSON.stringify(s)))},x={currentUser:t,loading:l,register:async e=>{try{if(!i(e))throw new Error("入力データが無効です");const s=d();if(s.find(s=>s.email===e.email))throw new Error("このメールアドレスは既に登録されています");const t={id:Date.now().toString(),name:e.name,email:e.email,password:c(e.password),age:e.age,gender:e.gender,points:0,surveysCompleted:[],joinDate:(new Date).toISOString(),lastLogin:(new Date).toISOString()};return s.push(t),localStorage.setItem("survey_monitor_users",JSON.stringify(s)),a(t),localStorage.setItem("survey_monitor_user",JSON.stringify(t)),{success:!0,user:t}}catch(s){return{success:!1,error:s.message}}},login:async(e,s)=>{try{const t=d().find(t=>t.email===e&&t.password===c(s));if(!t)throw new Error("メールアドレスまたはパスワードが正しくありません");return t.lastLogin=(new Date).toISOString(),o(t),a(t),localStorage.setItem("survey_monitor_user",JSON.stringify(t)),{success:!0,user:t}}catch(t){return{success:!1,error:t.message}}},loginDemo:()=>{const e={id:"demo_user",name:"デモユーザー",email:"demo@example.com",password:c("demo123"),age:"25-34",gender:"その他",points:150,surveysCompleted:["survey_1","survey_2"],joinDate:(new Date).toISOString(),lastLogin:(new Date).toISOString()},s=d(),t=s.findIndex(e=>"demo_user"===e.id);return-1!==t?s[t]=e:s.push(e),localStorage.setItem("survey_monitor_users",JSON.stringify(s)),a(e),localStorage.setItem("survey_monitor_user",JSON.stringify(e)),{success:!0,user:e}},logout:()=>{console.log("Logging out user:",null==t?void 0:t.name),a(null),localStorage.removeItem("survey_monitor_user")},addPoints:e=>{if(t){const s={...t,points:t.points+e};a(s),o(s),localStorage.setItem("survey_monitor_user",JSON.stringify(s))}},completeSurvey:e=>{if(t&&!t.surveysCompleted.includes(e)){const s={...t,surveysCompleted:[...t.surveysCompleted,e]};a(s),o(s),localStorage.setItem("survey_monitor_user",JSON.stringify(s))}},isAuthenticated:!!t};return b.jsx(N.Provider,{value:x,children:s})},k=e.createContext(),S=()=>{const s=e.useContext(k);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},I=({children:s})=>{const[t,a]=e.useState(()=>{const e=localStorage.getItem("theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});e.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)},[t]);const l={theme:t,toggleTheme:()=>{a(e=>"light"===e?"dark":"light")},isDark:"dark"===t,isLight:"light"===t};return b.jsx(k.Provider,{value:l,children:s})},C=()=>{const{currentUser:e,logout:s,isAuthenticated:t}=y(),{theme:r,toggleTheme:i,isDark:n}=S(),c=a();return b.jsx("header",{className:"glass-card sticky top-0 z-50",role:"banner",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between items-center py-4",children:[b.jsx("div",{className:"flex items-center",children:b.jsxs(l,{to:"/",className:"text-2xl font-bold text-white hover:text-blue-200 transition-colors flex items-center group forced-colors-link","aria-label":"Survey Monitor ホームページへ",children:[b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mr-3 group-hover:scale-110 transition-transform motion-safe",children:b.jsx("i",{className:"fas fa-chart-bar text-white text-lg","aria-hidden":"true"})}),b.jsx("span",{className:"bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Survey Monitor"})]})}),b.jsxs("nav",{className:"hidden md:flex space-x-6",role:"navigation","aria-label":"メインナビゲーション",children:[b.jsxs(l,{to:"/",className:"text-white hover:text-blue-200 font-medium transition-colors flex items-center group forced-colors-link motion-safe","aria-current":"/"===window.location.pathname?"page":void 0,children:[b.jsx("i",{className:"fas fa-home mr-2 group-hover:scale-110 transition-transform motion-safe","aria-hidden":"true"}),"ホーム"]}),b.jsxs(l,{to:"/surveys",className:"text-white hover:text-blue-200 font-medium transition-colors flex items-center group forced-colors-link motion-safe","aria-current":"/surveys"===window.location.pathname?"page":void 0,children:[b.jsx("i",{className:"fas fa-list mr-2 group-hover:scale-110 transition-transform motion-safe","aria-hidden":"true"}),"アンケート一覧"]}),t&&b.jsxs(b.Fragment,{children:[b.jsxs(l,{to:"/dashboard",className:"text-white hover:text-blue-200 font-medium transition-colors flex items-center group forced-colors-link motion-safe","aria-current":"/dashboard"===window.location.pathname?"page":void 0,children:[b.jsx("i",{className:"fas fa-tachometer-alt mr-2 group-hover:scale-110 transition-transform motion-safe","aria-hidden":"true"}),"ダッシュボード"]}),b.jsxs(l,{to:"/analytics",className:"text-white hover:text-blue-200 font-medium transition-colors flex items-center group forced-colors-link motion-safe","aria-current":"/analytics"===window.location.pathname?"page":void 0,children:[b.jsx("i",{className:"fas fa-brain mr-2 group-hover:scale-110 transition-transform motion-safe","aria-hidden":"true"}),"AI分析"]}),b.jsxs(l,{to:"/domo-ai",className:"text-white hover:text-blue-200 font-medium transition-colors flex items-center group forced-colors-link motion-safe","aria-current":"/domo-ai"===window.location.pathname?"page":void 0,children:[b.jsx("i",{className:"fas fa-chart-line mr-2 group-hover:scale-110 transition-transform motion-safe","aria-hidden":"true"}),"Domo.AI"]})]})]}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("button",{onClick:i,className:"p-2 rounded-lg bg-white bg-opacity-10 hover:bg-opacity-20 transition-colors text-white forced-colors-button motion-safe",title:n?"ライトモードに切り替え":"ダークモードに切り替え","aria-label":n?"ライトモードに切り替え":"ダークモードに切り替え",children:b.jsx("i",{className:"fas "+(n?"fa-sun":"fa-moon"),"aria-hidden":"true"})}),t?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center space-x-3 bg-white bg-opacity-10 rounded-lg px-4 py-2",children:[b.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:b.jsx("i",{className:"fas fa-user text-white text-sm","aria-hidden":"true"})}),b.jsxs("div",{className:"text-white",children:[b.jsx("div",{className:"font-medium text-sm",children:e.name}),b.jsxs("div",{className:"text-xs text-blue-200",children:[e.points,"pt"]})]})]}),b.jsxs("button",{onClick:()=>{s(),c("/")},className:"btn-secondary text-red-600 hover:text-red-700 hover:bg-red-50 forced-colors-button motion-safe","aria-label":"ログアウト",children:[b.jsx("i",{className:"fas fa-sign-out-alt mr-2","aria-hidden":"true"}),"ログアウト"]})]}):b.jsxs(b.Fragment,{children:[b.jsxs(l,{to:"/login",className:"text-white hover:text-blue-200 font-medium transition-colors flex items-center forced-colors-link motion-safe",children:[b.jsx("i",{className:"fas fa-sign-in-alt mr-2","aria-hidden":"true"}),"ログイン"]}),b.jsxs(l,{to:"/register",className:"btn-primary flex items-center forced-colors-button motion-safe",children:[b.jsx("i",{className:"fas fa-user-plus mr-2","aria-hidden":"true"}),"新規登録"]})]})]})]})})})},_=()=>b.jsx("footer",{className:"bg-gray-900 text-white py-8 mt-16",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Survey Monitor"}),b.jsx("p",{className:"text-gray-400",children:"アンケートに参加してポイントを獲得し、あなたの意見を価値に変えましょう。"})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-semibold mb-4",children:"サービス"}),b.jsxs("ul",{className:"space-y-2 text-gray-400",children:[b.jsx("li",{children:b.jsx("a",{href:"/surveys",className:"hover:text-white",children:"アンケート一覧"})}),b.jsx("li",{children:b.jsx("a",{href:"/dashboard",className:"hover:text-white",children:"ダッシュボード"})}),b.jsx("li",{children:b.jsx("a",{href:"#",className:"hover:text-white",children:"ポイント交換"})})]})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-semibold mb-4",children:"アカウント"}),b.jsxs("ul",{className:"space-y-2 text-gray-400",children:[b.jsx("li",{children:b.jsx("a",{href:"/login",className:"hover:text-white",children:"ログイン"})}),b.jsx("li",{children:b.jsx("a",{href:"/register",className:"hover:text-white",children:"新規登録"})}),b.jsx("li",{children:b.jsx("a",{href:"#",className:"hover:text-white",children:"プロフィール"})})]})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-semibold mb-4",children:"サポート"}),b.jsxs("ul",{className:"space-y-2 text-gray-400",children:[b.jsx("li",{children:b.jsx("a",{href:"#",className:"hover:text-white",children:"ヘルプセンター"})}),b.jsx("li",{children:b.jsx("a",{href:"#",className:"hover:text-white",children:"お問い合わせ"})}),b.jsx("li",{children:b.jsx("a",{href:"#",className:"hover:text-white",children:"利用規約"})})]})]})]}),b.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:b.jsx("p",{children:"© 2024 Survey Monitor. All rights reserved."})})]})}),D=()=>b.jsxs("div",{children:[b.jsx("section",{className:"gradient-bg text-white py-20",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[b.jsx("h2",{className:"text-4xl md:text-6xl font-bold mb-6",children:"アンケートでポイントを獲得"}),b.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"あなたの意見が価値に変わります"}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[b.jsx(l,{to:"/register",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"今すぐ始める"}),b.jsx(l,{to:"/surveys",className:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:"アンケートを見る"})]})]})}),b.jsx("section",{className:"py-16 bg-white",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"71"}),b.jsx("div",{className:"text-gray-600",children:"利用可能なアンケート"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"1,250"}),b.jsx("div",{className:"text-gray-600",children:"登録ユーザー数"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"15,680"}),b.jsx("div",{className:"text-gray-600",children:"獲得ポイント総数"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"6.5分"}),b.jsx("div",{className:"text-gray-600",children:"平均回答時間"})]})]})})}),b.jsx("section",{className:"py-16 bg-gray-50",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"おすすめアンケート"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[b.jsxs("div",{className:"bg-white rounded-lg shadow-md card-hover",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=200&fit=crop",alt:"スマートフォンアプリの使用状況調査",className:"w-full h-48 object-cover rounded-t-lg"}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:"テクノロジー"}),b.jsx("span",{className:"text-lg font-bold text-green-600 points-glow",children:"50pt"})]}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"スマートフォンアプリの使用状況調査"}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"日常的に使用しているアプリについて教えてください"}),b.jsx("div",{className:"flex items-center justify-between mb-4",children:b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),"5分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),"8問"]})]})}),b.jsxs(l,{to:"/survey/survey_1",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-semibold text-center block",children:[b.jsx("i",{className:"fas fa-play mr-2"}),"回答する"]})]})]}),b.jsxs("div",{className:"bg-white rounded-lg shadow-md card-hover",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=200&fit=crop",alt:"オンラインショッピングの利用実態",className:"w-full h-48 object-cover rounded-t-lg"}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"ショッピング"}),b.jsx("span",{className:"text-lg font-bold text-green-600 points-glow",children:"40pt"})]}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"オンラインショッピングの利用実態"}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"あなたの買い物習慣について教えてください"}),b.jsx("div",{className:"flex items-center justify-between mb-4",children:b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),"7分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),"12問"]})]})}),b.jsxs(l,{to:"/survey/survey_2",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-semibold text-center block",children:[b.jsx("i",{className:"fas fa-play mr-2"}),"回答する"]})]})]}),b.jsxs("div",{className:"bg-white rounded-lg shadow-md card-hover",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=200&fit=crop",alt:"働き方に関する意識調査",className:"w-full h-48 object-cover rounded-t-lg"}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800",children:"ビジネス"}),b.jsx("span",{className:"text-lg font-bold text-green-600 points-glow",children:"60pt"})]}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"働き方に関する意識調査"}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"現代の働き方についてあなたの意見を聞かせてください"}),b.jsx("div",{className:"flex items-center justify-between mb-4",children:b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),"10分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),"15問"]})]})}),b.jsxs(l,{to:"/survey/survey_3",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-semibold text-center block",children:[b.jsx("i",{className:"fas fa-play mr-2"}),"回答する"]})]})]})]})]})}),b.jsx("section",{className:"py-16 bg-white",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"なぜSurvey Monitorなのか？"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx("i",{className:"fas fa-gift text-2xl text-blue-600"})}),b.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ポイント獲得"}),b.jsx("p",{className:"text-gray-600",children:"アンケートに回答するだけでポイントを獲得できます"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx("i",{className:"fas fa-clock text-2xl text-green-600"})}),b.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"短時間で完了"}),b.jsx("p",{className:"text-gray-600",children:"平均6.5分で完了する短時間アンケート"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx("i",{className:"fas fa-shield-alt text-2xl text-purple-600"})}),b.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"安全・安心"}),b.jsx("p",{className:"text-gray-600",children:"個人情報は厳重に管理され、安全にご利用いただけます"})]})]})]})})]}),M=()=>{const[s,t]=e.useState(""),[r,i]=e.useState(""),[n,c]=e.useState(!1),[d,o]=e.useState(""),{login:x,loginDemo:m}=y(),h=a();return b.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"max-w-md w-full space-y-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("img",{src:"/PC.png",alt:"Survey Monitor",className:"mx-auto h-16 w-16"}),b.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"ログイン"}),b.jsx("p",{className:"mt-2 text-white opacity-90",children:"アカウントにログインしてポイントを獲得しましょう"})]}),b.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),c(!0),o("");try{const e=await x(s,r);e.success?h("/dashboard"):o(e.error)}catch(t){o("ログインに失敗しました")}finally{c(!1)}},children:[d&&b.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"relative",children:[b.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-envelope mr-2"}),"メールアドレス"]}),b.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",placeholder:"example@email.com"})]}),b.jsxs("div",{className:"relative",children:[b.jsxs("label",{htmlFor:"password",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-lock mr-2"}),"パスワード"]}),b.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",placeholder:"パスワードを入力"})]})]}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-white/50 rounded bg-white/90"}),b.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm font-medium text-white",children:"ログイン状態を保持"})]}),b.jsx("div",{className:"text-sm",children:b.jsx("a",{href:"#",className:"font-medium text-white hover:text-blue-200 transition-colors",children:"パスワードを忘れた場合"})})]}),b.jsx("div",{children:b.jsxs("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all hover-lift neon-glow disabled:opacity-50",children:[b.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:b.jsx("i",{className:"fas fa-sign-in-alt text-white group-hover:text-blue-200"})}),n?"ログイン中...":"ログイン"]})}),b.jsx("div",{className:"text-center",children:b.jsxs("div",{className:"text-sm text-white",children:["デモアカウントでログイン:",b.jsx("button",{type:"button",onClick:async()=>{c(!0),o("");try{m().success?h("/dashboard"):o("デモユーザーログインに失敗しました")}catch(e){o("デモユーザーログインエラー")}finally{c(!1)}},disabled:n,className:"font-medium text-blue-200 hover:text-white ml-1 transition-colors disabled:opacity-50",children:"デモユーザー"})]})}),b.jsx("div",{className:"text-center pt-4 border-t border-white/30",children:b.jsxs("p",{className:"text-white",children:["アカウントをお持ちでない方は",b.jsx(l,{to:"/register",className:"font-medium text-blue-200 hover:text-white transition-colors",children:"新規登録"})]})})]})]})})},A=()=>{const[s,t]=e.useState({name:"",email:"",password:"",confirmPassword:"",age:"",gender:""}),[r,i]=e.useState(!1),[n,c]=e.useState(""),{register:d}=y(),o=a(),x=e=>{t({...s,[e.target.name]:e.target.value})};return b.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"max-w-md w-full space-y-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("img",{src:"/PC.png",alt:"Survey Monitor",className:"mx-auto h-16 w-16"}),b.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"新規登録"}),b.jsx("p",{className:"mt-2 text-white opacity-90",children:"アカウントを作成してアンケートを始めましょう"})]}),b.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),i(!0),c(""),s.password!==s.confirmPassword)return c("パスワードが一致しません"),void i(!1);try{const e=await d(s);e.success?o("/dashboard"):c(e.error)}catch(t){c("登録に失敗しました")}finally{i(!1)}},children:[n&&b.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:n}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-user mr-2"}),"お名前"]}),b.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:s.name,onChange:x,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",placeholder:"山田太郎"})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-envelope mr-2"}),"メールアドレス"]}),b.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:x,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",placeholder:"example@email.com"})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"password",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-lock mr-2"}),"パスワード"]}),b.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s.password,onChange:x,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",placeholder:"8文字以上で入力"})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-lock mr-2"}),"パスワード確認"]}),b.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s.confirmPassword,onChange:x,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",placeholder:"パスワードを再入力"})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"age",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-calendar mr-2"}),"年齢層"]}),b.jsxs("select",{id:"age",name:"age",required:!0,value:s.age,onChange:x,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",children:[b.jsx("option",{value:"",children:"選択してください"}),b.jsx("option",{value:"18-24",children:"18-24歳"}),b.jsx("option",{value:"25-34",children:"25-34歳"}),b.jsx("option",{value:"35-44",children:"35-44歳"}),b.jsx("option",{value:"45-54",children:"45-54歳"}),b.jsx("option",{value:"55-64",children:"55-64歳"}),b.jsx("option",{value:"65+",children:"65歳以上"})]})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"gender",className:"block text-sm font-semibold text-white mb-2",children:[b.jsx("i",{className:"fas fa-venus-mars mr-2"}),"性別"]}),b.jsxs("select",{id:"gender",name:"gender",required:!0,value:s.gender,onChange:x,className:"w-full px-4 py-3 bg-white/90 backdrop-blur-sm border border-white/50 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all",children:[b.jsx("option",{value:"",children:"選択してください"}),b.jsx("option",{value:"男性",children:"男性"}),b.jsx("option",{value:"女性",children:"女性"}),b.jsx("option",{value:"その他",children:"その他"})]})]})]}),b.jsx("div",{children:b.jsxs("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all hover-lift neon-glow disabled:opacity-50",children:[b.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:b.jsx("i",{className:"fas fa-user-plus text-white group-hover:text-blue-200"})}),r?"登録中...":"アカウントを作成"]})}),b.jsx("div",{className:"text-center pt-4 border-t border-white/30",children:b.jsxs("p",{className:"text-white",children:["既にアカウントをお持ちの方は",b.jsx(l,{to:"/login",className:"font-medium text-blue-200 hover:text-white transition-colors",children:"ログイン"})]})})]})]})})},$=()=>{const{isAuthenticated:s,user:t}=y(),[a,r]=e.useState([]),[i,n]=e.useState([]),[c,d]=e.useState(!0),[o,x]=e.useState(null);e.useEffect(()=>{s&&m()},[s]);const m=async()=>{try{d(!0);const e=await fetch("/api/surveys.json"),s=await e.json();s.success&&r(s.data);const t=await fetch("/api/surveys-categories.json"),a=await t.json();a.success&&n(a.data)}catch(e){console.error("Failed to load data:",e),x("データの読み込みに失敗しました")}finally{d(!1)}};return s?c?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),b.jsx("p",{className:"text-gray-600",children:"データを読み込み中..."})]})}):o?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"エラーが発生しました"}),b.jsx("p",{className:"text-gray-600 mb-6",children:o}),b.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"再試行"})]})}):b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"アンケート一覧"}),b.jsx("p",{className:"text-xl text-gray-600",children:"興味のあるアンケートを選んで、ポイントを獲得しましょう"})]}),b.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:a.length}),b.jsx("div",{className:"text-gray-600",children:"利用可能なアンケート"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"0"}),b.jsx("div",{className:"text-gray-600",children:"完了済み"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:(null==t?void 0:t.points)||0}),b.jsx("div",{className:"text-gray-600",children:"獲得ポイント"})]}),b.jsxs("div",{className:"text-center",children:[b.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[a.length>0?Math.round(a.reduce((e,s)=>e+(s.estimated_time||0),0)/a.length):0,"分"]}),b.jsx("div",{className:"text-gray-600",children:"平均回答時間"})]})]})}),b.jsxs("div",{className:"mb-8",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"カテゴリー"}),b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[b.jsxs(l,{to:"/category/all",className:"category-card bg-blue-500 text-white p-6 rounded-lg text-center hover:bg-blue-600 transition-all hover-lift",children:[b.jsx("i",{className:"fas fa-th-large text-2xl mb-2"}),b.jsx("div",{className:"font-semibold",children:"すべて"}),b.jsxs("div",{className:"text-sm opacity-90",children:[a.length,"件"]})]}),i.map(e=>{const s=a.filter(s=>s.category===e.name);return b.jsxs(l,{to:`/category/${e.name}`,className:"category-card text-white p-6 rounded-lg text-center hover:opacity-90 transition-all hover-lift",style:{backgroundColor:e.color},children:[b.jsx("i",{className:`${e.icon} text-2xl mb-2`}),b.jsx("div",{className:"font-semibold",children:e.name}),b.jsxs("div",{className:"text-sm opacity-90",children:[s.length,"件"]})]},e.id)})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>{var s;return b.jsxs("div",{className:"survey-card bg-white rounded-xl shadow-lg overflow-hidden",children:[b.jsx("img",{src:e.image_url||"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=200&fit=crop",alt:e.title,className:"w-full h-48 object-cover"}),b.jsxs("div",{className:"p-6",children:[b.jsx("div",{className:"flex items-center justify-between mb-3",children:b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:e.category})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),e.estimated_time,"分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),(null==(s=e.questions)?void 0:s.length)||0,"問"]})]}),b.jsxs("span",{className:"text-lg font-bold text-green-600 points-glow",children:[e.points,"pt"]})]}),b.jsxs(l,{to:`/survey/${e.id}`,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-semibold text-center block",children:[b.jsx("i",{className:"fas fa-play mr-2"}),"回答する"]})]})]},e.id)})})]}):b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ログインが必要です"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"アンケート一覧を表示するにはログインしてください"}),b.jsx(l,{to:"/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ログイン"})]})})},P=()=>{const{category:e}=r(),{isAuthenticated:s}=y();if(!s)return b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ログインが必要です"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"カテゴリーページを表示するにはログインしてください"}),b.jsx(l,{to:"/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ログイン"})]})});const t={"テクノロジー":{title:"テクノロジー",description:"最新のテクノロジーとデジタル技術に関するアンケート",icon:"fas fa-laptop-code",color:"#3B82F6",colorDark:"#1E40AF"},"ショッピング":{title:"ショッピング",description:"オンラインショッピングと買い物に関するアンケート",icon:"fas fa-shopping-cart",color:"#10B981",colorDark:"#047857"},"ビジネス":{title:"ビジネス",description:"働き方とビジネス環境に関するアンケート",icon:"fas fa-briefcase",color:"#8B5CF6",colorDark:"#6D28D9"},"ライフスタイル":{title:"ライフスタイル",description:"日常生活とライフスタイルに関するアンケート",icon:"fas fa-heart",color:"#EC4899",colorDark:"#BE185D"},"エンターテイメント":{title:"エンターテイメント",description:"ゲームとエンターテイメントに関するアンケート",icon:"fas fa-gamepad",color:"#F59E0B",colorDark:"#D97706"},"ヘルスケア":{title:"ヘルスケア",description:"健康管理とヘルスケアに関するアンケート",icon:"fas fa-heartbeat",color:"#EF4444",colorDark:"#DC2626"}}[e]||{title:"すべてのアンケート",description:"すべてのカテゴリーのアンケートを表示しています",icon:"fas fa-th-large",color:"#667eea",colorDark:"#764ba2"};return b.jsxs("div",{children:[b.jsx("div",{className:"text-white py-16",style:{background:`linear-gradient(135deg, ${t.color} 0%, ${t.colorDark} 100%)`},children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[b.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx("i",{className:`${t.icon} text-3xl text-white`})}),b.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:t.title}),b.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:t.description}),b.jsx("div",{className:"text-lg opacity-80",children:"2件のアンケートが利用可能"})]})}),b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsx("nav",{className:"mb-8",children:b.jsxs("ol",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[b.jsx("li",{children:b.jsx(l,{to:"/",className:"hover:text-blue-600",children:"ホーム"})}),b.jsx("li",{children:b.jsx("i",{className:"fas fa-chevron-right text-xs"})}),b.jsx("li",{children:b.jsx(l,{to:"/surveys",className:"hover:text-blue-600",children:"アンケート一覧"})}),b.jsx("li",{children:b.jsx("i",{className:"fas fa-chevron-right text-xs"})}),b.jsx("li",{className:"text-gray-900 font-medium",children:t.title})]})}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.jsxs("div",{className:"survey-card bg-white rounded-xl shadow-lg overflow-hidden",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=200&fit=crop",alt:"スマートフォンアプリの使用状況調査",className:"w-full h-48 object-cover"}),b.jsxs("div",{className:"p-6",children:[b.jsx("div",{className:"flex items-center justify-between mb-3",children:b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:"テクノロジー"})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"スマートフォンアプリの使用状況調査"}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"日常的に使用しているアプリについて教えてください"}),b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),"5分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),"8問"]})]}),b.jsx("span",{className:"text-lg font-bold text-green-600",children:"50pt"})]}),b.jsxs(l,{to:"/survey/survey_1",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-semibold text-center block",children:[b.jsx("i",{className:"fas fa-play mr-2"}),"回答する"]})]})]}),b.jsxs("div",{className:"survey-card bg-white rounded-xl shadow-lg overflow-hidden",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=200&fit=crop",alt:"オンラインショッピングの利用実態",className:"w-full h-48 object-cover"}),b.jsxs("div",{className:"p-6",children:[b.jsx("div",{className:"flex items-center justify-between mb-3",children:b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"ショッピング"})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"オンラインショッピングの利用実態"}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"あなたの買い物習慣について教えてください"}),b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),"7分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),"12問"]})]}),b.jsx("span",{className:"text-lg font-bold text-green-600",children:"40pt"})]}),b.jsxs(l,{to:"/survey/survey_2",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-semibold text-center block",children:[b.jsx("i",{className:"fas fa-play mr-2"}),"回答する"]})]})]})]}),b.jsx("div",{className:"text-center mt-12",children:b.jsxs(l,{to:"/surveys",className:"inline-flex items-center bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors",children:[b.jsx("i",{className:"fas fa-arrow-left mr-2"}),"カテゴリー一覧に戻る"]})})]})]})},O=()=>{const{currentUser:e,isAuthenticated:s}=y();return s?b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsxs("div",{className:"mb-8",children:[b.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"ダッシュボード"}),b.jsxs("p",{className:"text-xl text-gray-600",children:["ようこそ、",e.name,"さん"]})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[b.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:b.jsx("i",{className:"fas fa-chart-line text-2xl text-blue-600"})}),b.jsxs("div",{className:"ml-4",children:[b.jsx("p",{className:"text-sm font-medium text-gray-600",children:"獲得ポイント"}),b.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.points})]})]})}),b.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:b.jsx("i",{className:"fas fa-check-circle text-2xl text-green-600"})}),b.jsxs("div",{className:"ml-4",children:[b.jsx("p",{className:"text-sm font-medium text-gray-600",children:"完了したアンケート"}),b.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.surveysCompleted.length})]})]})}),b.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:b.jsx("i",{className:"fas fa-calendar text-2xl text-purple-600"})}),b.jsxs("div",{className:"ml-4",children:[b.jsx("p",{className:"text-sm font-medium text-gray-600",children:"登録日"}),b.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Date(e.joinDate).toLocaleDateString("ja-JP")})]})]})}),b.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:b.jsx("i",{className:"fas fa-clock text-2xl text-orange-600"})}),b.jsxs("div",{className:"ml-4",children:[b.jsx("p",{className:"text-sm font-medium text-gray-600",children:"最終ログイン"}),b.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Date(e.lastLogin).toLocaleDateString("ja-JP")})]})]})})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"最近の活動"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:b.jsx("i",{className:"fas fa-check text-green-600"})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:"アンケート完了"}),b.jsx("p",{className:"text-xs text-gray-500",children:"スマートフォンアプリの使用状況調査"})]}),b.jsx("div",{className:"ml-auto",children:b.jsx("span",{className:"text-sm font-medium text-green-600",children:"+50pt"})})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:b.jsx("i",{className:"fas fa-user-plus text-blue-600"})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:"アカウント作成"}),b.jsx("p",{className:"text-xs text-gray-500",children:"新規登録完了"})]}),b.jsx("div",{className:"ml-auto",children:b.jsx("span",{className:"text-sm font-medium text-blue-600",children:"+100pt"})})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"おすすめアンケート"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=60&h=60&fit=crop",alt:"アンケート",className:"w-12 h-12 rounded-lg object-cover"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:"スマートフォンアプリの使用状況調査"}),b.jsx("p",{className:"text-xs text-gray-500",children:"テクノロジー • 5分 • 50pt"})]}),b.jsx("button",{className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors",children:"回答"})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=60&h=60&fit=crop",alt:"アンケート",className:"w-12 h-12 rounded-lg object-cover"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:"オンラインショッピングの利用実態"}),b.jsx("p",{className:"text-xs text-gray-500",children:"ショッピング • 7分 • 40pt"})]}),b.jsx("button",{className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors",children:"回答"})]})]})]})]})]}):b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ログインが必要です"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"ダッシュボードを表示するにはログインしてください"})]})})},T=({title:e,value:s,change:t,changeType:a="neutral",icon:l,color:r="primary",trend:i,subtitle:n,loading:c=!1,className:d=""})=>c?b.jsx("div",{className:`metric-card ${d}`,children:b.jsxs("div",{className:"animate-pulse",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),b.jsx("div",{className:"w-16 h-4 bg-gray-200 rounded"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("div",{className:"w-24 h-8 bg-gray-200 rounded"}),b.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]})]})}):b.jsxs("div",{className:`metric-card ${d}`,children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("div",{className:`metric-icon ${{primary:"text-blue-600 bg-blue-100",success:"text-emerald-600 bg-emerald-100",warning:"text-amber-600 bg-amber-100",danger:"text-red-600 bg-red-100",info:"text-cyan-600 bg-cyan-100"}[r]}`,children:l}),t&&b.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${{positive:"text-emerald-600 bg-emerald-50",negative:"text-red-600 bg-red-50",neutral:"text-gray-600 bg-gray-50"}[a]}`,children:b.jsxs("span",{className:"flex items-center",children:["positive"===a&&b.jsx("span",{className:"mr-1",children:"↗"}),"negative"===a&&b.jsx("span",{className:"mr-1",children:"↘"}),"neutral"===a&&b.jsx("span",{className:"mr-1",children:"→"}),t]})})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("div",{className:"metric-value",children:"number"==typeof s?s.toLocaleString():s}),b.jsx("div",{className:"metric-label",children:e}),n&&b.jsx("div",{className:"text-sm text-gray-500 mt-1",children:n})]}),i&&b.jsxs("div",{className:"mt-4",children:[b.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[b.jsx("span",{children:"トレンド"}),b.jsx("span",{children:i.period})]}),b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:"progress-fill",style:{width:`${i.percentage}%`}})})]})]}),R=({survey:e,analytics:s,loading:t})=>b.jsx(T,{title:"総アンケート数",value:(null==s?void 0:s.totalSurveys)||(null==s?void 0:s.total_surveys)||0,change:"+12%",changeType:"positive",icon:b.jsx("i",{className:"fas fa-chart-line"}),color:"primary",subtitle:"アクティブなアンケート",loading:t}),q=({analytics:e,loading:s})=>b.jsx(T,{title:"総回答数",value:(null==e?void 0:e.totalResponses)||(null==e?void 0:e.total_responses)||0,change:"+8%",changeType:"positive",icon:b.jsx("i",{className:"fas fa-check-circle"}),color:"success",subtitle:"今月の回答数",loading:s}),L=({analytics:e,loading:s})=>b.jsx(T,{title:"平均完了率",value:`${(null==e?void 0:e.averageCompletionRate)||(null==e?void 0:e.average_completion_rate)||0}%`,change:"-2%",changeType:"negative",icon:b.jsx("i",{className:"fas fa-percentage"}),color:"warning",subtitle:"全アンケート平均",loading:s}),F=({analytics:e,loading:s})=>b.jsx(T,{title:"平均品質スコア",value:(null==e?void 0:e.averageQualityScore)||(null==e?void 0:e.average_response_quality)||0,change:"+5%",changeType:"positive",icon:b.jsx("i",{className:"fas fa-star"}),color:"info",subtitle:"回答品質評価",loading:s}),E=({type:s,data:t,title:a,height:l=300,className:r="",options:i={}})=>{const n=e.useRef(null),c=(d=t)&&Array.isArray(d)?d.map(e=>"number"==typeof e?{value:e,label:`Item ${e}`}:"object"==typeof e&&null!==e?{value:"number"!=typeof e.value||isNaN(e.value)?0:e.value,label:e.label||e.name||"Unknown"}:{value:0,label:"Invalid"}).filter(e=>e.value>=0):[];var d;e.useEffect(()=>{n.current&&n.current.classList.add("fade-in")},[c]);return b.jsxs("div",{className:`chart-container ${r}`,ref:n,children:[a&&b.jsxs("div",{className:"flex items-center justify-between mb-6",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),b.jsx("span",{className:"text-sm text-gray-500",children:"リアルタイム"})]})]}),b.jsx("div",{className:"chart-wrapper",style:{height:`${l}px`},children:(()=>{if(0===c.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-bar text-4xl mb-2"}),b.jsx("p",{children:"データがありません"})]})});switch(s){case"line":default:return b.jsx(U,{data:c,height:l});case"bar":return b.jsx(J,{data:c,height:l});case"pie":return b.jsx(B,{data:c,height:l});case"area":return b.jsx(G,{data:c,height:l});case"donut":return b.jsx(W,{data:c,height:l})}})()})]})},U=({data:e,height:s})=>{if(!e||0===e.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-line text-4xl mb-2"}),b.jsx("p",{children:"データがありません"})]})});const t=e.map(e=>e.value).filter(e=>"number"==typeof e&&!isNaN(e));if(0===t.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-exclamation-triangle text-4xl mb-2"}),b.jsx("p",{children:"有効なデータがありません"})]})});const a=Math.max(...t),l=Math.min(...t),r=a===l?1:a-l;return b.jsxs("div",{className:"relative w-full h-full",children:[b.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[b.jsx("defs",{children:b.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:b.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"rgba(0,0,0,0.05)",strokeWidth:"1"})})}),b.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),b.jsx("polyline",{fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",points:e.map((s,t)=>`${e.length>1?t/(e.length-1)*100:50}%,${100-(s.value-l)/r*80}%`).join(" "),className:"animate-draw"}),e.map((s,t)=>{const a=e.length>1?t/(e.length-1)*100:50,i=100-(s.value-l)/r*80;return b.jsx("circle",{cx:`${a}%`,cy:`${i}%`,r:"4",fill:"white",stroke:"var(--primary-500)",strokeWidth:"2",className:"animate-scale",style:{animationDelay:.1*t+"s"}},t)}),b.jsx("defs",{children:b.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[b.jsx("stop",{offset:"0%",stopColor:"var(--primary-500)"}),b.jsx("stop",{offset:"100%",stopColor:"var(--accent-purple)"})]})})]}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-gray-500",children:e.map((e,s)=>b.jsx("span",{className:"transform -rotate-45 origin-left",children:e.label},s))})]})},J=({data:e,height:s})=>{if(!e||0===e.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-bar text-4xl mb-2"}),b.jsx("p",{children:"データがありません"})]})});const t=e.map(e=>e.value).filter(e=>"number"==typeof e&&!isNaN(e));if(0===t.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-exclamation-triangle text-4xl mb-2"}),b.jsx("p",{children:"有効なデータがありません"})]})});const a=Math.max(...t);return b.jsx("div",{className:"relative w-full h-full flex items-end justify-between px-4",children:e.map((e,s)=>{const t=a>0?e.value/a*100:0;return b.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[b.jsx("div",{className:"w-8 bg-gradient-to-t from-blue-500 to-purple-500 rounded-t-lg transition-all duration-500 ease-out hover:from-blue-600 hover:to-purple-600",style:{height:`${t}%`,animationDelay:.1*s+"s"}}),b.jsx("span",{className:"text-xs text-gray-500 font-medium",children:e.label}),b.jsx("span",{className:"text-xs text-gray-400",children:e.value})]},s)})})},B=({data:e,height:s})=>{if(!e||0===e.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-pie text-4xl mb-2"}),b.jsx("p",{children:"データがありません"})]})});const t=e.filter(e=>"number"==typeof e.value&&!isNaN(e.value)&&e.value>0);if(0===t.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-exclamation-triangle text-4xl mb-2"}),b.jsx("p",{children:"有効なデータがありません"})]})});const a=t.reduce((e,s)=>e+s.value,0);let l=0;const r=["var(--primary-500)","var(--accent-purple)","var(--accent-emerald)","var(--accent-amber)","var(--accent-red)","var(--accent-pink)"];return b.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[b.jsx("svg",{width:"200",height:"200",className:"transform -rotate-90",children:e.map((e,s)=>{const t=e.value/a*100,i=l/100*360,n=(l+t)/100*360,c=["M 100 100",`L ${100+80*Math.cos(i*Math.PI/180)} ${100+80*Math.sin(i*Math.PI/180)}`,`A 80 80 0 ${t>50?1:0} 1 ${100+80*Math.cos(n*Math.PI/180)} ${100+80*Math.sin(n*Math.PI/180)}`,"Z"].join(" ");return l+=t,b.jsx("path",{d:c,fill:r[s%r.length],className:"hover:opacity-80 transition-opacity duration-200",style:{animationDelay:.1*s+"s"}},s)})}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a}),b.jsx("div",{className:"text-sm text-gray-500",children:"総数"})]})}),b.jsx("div",{className:"absolute right-0 top-0 space-y-2",children:t.map((e,s)=>b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r[s%r.length]}}),b.jsx("span",{className:"text-xs text-gray-600",children:e.label})]},s))})]})},G=({data:e,height:s})=>{if(!e||0===e.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-area text-4xl mb-2"}),b.jsx("p",{children:"データがありません"})]})});const t=e.map(e=>e.value).filter(e=>"number"==typeof e&&!isNaN(e));if(0===t.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-exclamation-triangle text-4xl mb-2"}),b.jsx("p",{children:"有効なデータがありません"})]})});const a=Math.max(...t),l=Math.min(...t),r=a===l?1:a-l,i=e.map((s,t)=>`${e.length>1?t/(e.length-1)*100:50},${100-(s.value-l)/r*80}`).join(" L "),n=`M 0,100 L ${i} L 100,100 Z`;return b.jsx("div",{className:"relative w-full h-full",children:b.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[b.jsx("path",{d:n,fill:"url(#areaGradient)",className:"animate-fade-in"}),b.jsx("polyline",{fill:"none",stroke:"var(--primary-500)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",points:i,className:"animate-draw"}),b.jsx("defs",{children:b.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[b.jsx("stop",{offset:"0%",stopColor:"var(--primary-500)",stopOpacity:"0.3"}),b.jsx("stop",{offset:"100%",stopColor:"var(--primary-500)",stopOpacity:"0.05"})]})})]})})},W=({data:e,height:s})=>{if(!e||0===e.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-pie text-4xl mb-2"}),b.jsx("p",{children:"データがありません"})]})});const t=e.filter(e=>"number"==typeof e.value&&!isNaN(e.value)&&e.value>0);if(0===t.length)return b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-exclamation-triangle text-4xl mb-2"}),b.jsx("p",{children:"有効なデータがありません"})]})});const a=t.reduce((e,s)=>e+s.value,0);let l=0;const r=["var(--primary-500)","var(--accent-purple)","var(--accent-emerald)","var(--accent-amber)","var(--accent-red)","var(--accent-pink)"];return b.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[b.jsx("svg",{width:"200",height:"200",className:"transform -rotate-90",children:t.map((e,s)=>{const t=e.value/a*100,i=l/100*360,n=(l+t)/100*360,c=["M 100 100",`L ${100+60*Math.cos(i*Math.PI/180)} ${100+60*Math.sin(i*Math.PI/180)}`,`A 60 60 0 ${t>50?1:0} 1 ${100+60*Math.cos(n*Math.PI/180)} ${100+60*Math.sin(n*Math.PI/180)}`,"Z"].join(" ");return l+=t,b.jsx("path",{d:c,fill:r[s%r.length],className:"hover:opacity-80 transition-opacity duration-200",style:{animationDelay:.1*s+"s"}},s)})}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a}),b.jsx("div",{className:"text-sm text-gray-500",children:"総数"})]})})]})},z=()=>{var s,t,a,l;const{currentUser:r,isAuthenticated:i}=y();S();const[n,c]=e.useState(null),[d,o]=e.useState(!0),[x,m]=e.useState(null),[h,u]=e.useState("overview");e.useEffect(()=>{g()},[]);const g=async()=>{try{o(!0);const e=await fetch("/api/dashboard.json");let s;s=e.ok?await e.json():{overview:{totalUsers:5,totalSurveys:5,totalResponses:5,totalPoints:6670,completionRate:85.2,averageRating:4.2},recentSurveys:[{id:1,title:"スマートフォンアプリの使用状況調査",category_id:1,current_responses:342,status:"active",points:100},{id:2,title:"オンラインショッピングの購買行動分析",category_id:2,current_responses:189,status:"active",points:150}],topCategories:[{name:"テクノロジー・IT",count:1,color:"#3B82F6"},{name:"ショッピング・EC",count:1,color:"#10B981"},{name:"ビジネス・働き方",count:1,color:"#8B5CF6"}],aiInsights:[{title:"アプリ使用満足度の高い傾向",description:"3-5時間の使用時間層で最も高い満足度を示しています",confidence_score:.87}],charts:{responseTrend:[{label:"1月",value:120},{label:"2月",value:150},{label:"3月",value:180},{label:"4月",value:200},{label:"5月",value:220}],categoryDistribution:[{label:"テクノロジー",value:35},{label:"ショッピング",value:25},{label:"ビジネス",value:20},{label:"ライフスタイル",value:15},{label:"その他",value:5}],satisfactionScore:[{label:"非常に満足",value:45},{label:"満足",value:35},{label:"普通",value:15},{label:"不満",value:3},{label:"非常に不満",value:2}]}},c(s),s.recentSurveys&&s.recentSurveys.length>0&&m(s.recentSurveys[0])}catch(e){console.error("ダッシュボードデータの取得に失敗しました:",e);c({overview:{totalUsers:0,totalSurveys:0,totalResponses:0,totalPoints:0,completionRate:0,averageRating:0},recentSurveys:[],topCategories:[],aiInsights:[],charts:{responseTrend:[],categoryDistribution:[],satisfactionScore:[]}})}finally{o(!1)}};return i?d?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"loading-spinner mx-auto mb-4"}),b.jsx("p",{className:"text-white text-lg",children:"AI分析データを読み込み中..."}),b.jsx("p",{className:"text-white text-sm mt-2",children:"モックデータを準備しています..."})]})}):n?b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsxs("div",{className:"mb-8 fade-in",children:[b.jsx("h1",{className:"text-5xl font-bold text-white mb-3 bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"AI分析ダッシュボード"}),b.jsxs("p",{className:"text-xl text-blue-100 flex items-center",children:[b.jsx("i",{className:"fas fa-brain mr-2"}),"Domo.AI パワード アンケート分析システム"]})]}),b.jsx("div",{className:"glass-card p-8 mb-8 text-white slide-in-left",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsxs("h3",{className:"text-3xl font-bold mb-3 flex items-center",children:[b.jsx("i",{className:"fas fa-brain mr-3 text-yellow-300"}),"AI インサイト"]}),b.jsx("p",{className:"text-blue-100 text-lg",children:"リアルタイムでアンケートデータを分析し、自動的にインサイトを生成します"})]}),b.jsxs("div",{className:"text-right",children:[b.jsx("div",{className:"text-4xl font-bold text-yellow-300",children:(null==(s=null==n?void 0:n.ai_recommendations)?void 0:s.length)||0}),b.jsx("div",{className:"text-blue-100 text-sm",children:"アクティブな推奨事項"}),b.jsx("div",{className:"mt-2",children:b.jsxs("span",{className:"status-indicator success",children:[b.jsx("i",{className:"fas fa-check-circle mr-1"}),"アクティブ"]})})]})]})}),b.jsxs("div",{className:"grid-responsive mb-8",children:[b.jsx(R,{analytics:n,loading:d}),b.jsx(q,{analytics:n,loading:d}),b.jsx(L,{analytics:n,loading:d}),b.jsx(F,{analytics:n,loading:d})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[b.jsxs("div",{className:"lg:col-span-1",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"アンケート一覧"}),b.jsxs("div",{className:"space-y-3",children:[((null==n?void 0:n.surveys)||(null==n?void 0:n.recent_surveys)||[]).map(e=>b.jsx("div",{className:"p-4 rounded-lg border cursor-pointer transition-colors "+((null==x?void 0:x.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>(async e=>{try{const t={success:!0,data:{id:e,title:`アンケート ${e} の詳細分析`,totalResponses:156,completionRate:82.1,averageQualityScore:75.2,averageCompletionTime:4.2,sentimentAnalysis:{positive:45,negative:25,neutral:30},demographics:{ageGroups:{under_20:12,"20s":45,"30s":52,"40s":31,"50s":16,over_60:8},gender:{male:89,female:67}},questionAnalytics:[{questionId:1,questionText:"普段使用しているスマートフォンのOSは何ですか？",questionType:"radio",responseCount:156,answerDistribution:{iOS:89,Android:67}},{questionId:2,questionText:"1日にスマートフォンを使用する時間はどのくらいですか？",questionType:"radio",responseCount:142,answerDistribution:{"1時間未満":23,"1-3時間":45,"3-5時間":52,"5時間以上":22}}]}};try{const s=await fetch(`/api/analytics/survey/${e}/analytics`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();if(e.success)return void m(e.data)}}catch(s){console.log("API not available, using mock data")}m(t.data)}catch(t){console.error("Failed to fetch survey analytics:",t)}})(e.id),children:b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:e.title}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.category}),b.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[b.jsxs("span",{className:"text-xs text-gray-500",children:[b.jsx("i",{className:"fas fa-users mr-1"}),e.responses||e.response_count||0," 回答"]}),b.jsxs("span",{className:"text-xs text-gray-500",children:[b.jsx("i",{className:"fas fa-percentage mr-1"}),(e.completionRate||e.completion_rate||0).toFixed(1),"%"]})]})]}),b.jsx("div",{className:"flex space-x-2",children:b.jsx("button",{onClick:s=>{s.stopPropagation(),(async(e,s="pdf")=>{try{const t=await fetch(`/api/analytics/survey/${e}/generate-report`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({report_type:s,include_charts:!0,include_insights:!0})}),a=await t.json();a.success&&window.open(a.data.download_url,"_blank")}catch(t){console.error("Failed to generate report:",t)}})(e.id,"pdf")},className:"text-blue-600 hover:text-blue-800 text-xs",children:b.jsx("i",{className:"fas fa-download"})})})]})},e.id)),(!(null==n?void 0:n.surveys)||0===n.surveys.length)&&b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx("i",{className:"fas fa-chart-bar text-4xl mb-4"}),b.jsx("p",{children:"アンケートデータを読み込み中..."})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🤖 AI推奨事項"}),b.jsxs("div",{className:"space-y-3",children:[((null==n?void 0:n.insights)||(null==n?void 0:n.ai_recommendations)||[]).map((e,s)=>b.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-600"})}),b.jsxs("div",{className:"ml-3",children:[b.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:e.title||e.survey_title||"AI推奨事項"}),b.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:e.description||e.recommendation||"詳細な分析結果をお待ちください"}),e.confidence&&b.jsx("div",{className:"mt-2",children:b.jsxs("span",{className:"text-xs text-yellow-600",children:["信頼度: ",e.confidence,"%"]})})]})]})},s)),(!(null==n?void 0:n.insights)||0===n.insights.length)&&b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx("i",{className:"fas fa-robot text-4xl mb-4"}),b.jsx("p",{children:"AI推奨事項を生成中..."})]})]})]})]}),b.jsx("div",{className:"lg:col-span-2",children:x?b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"詳細分析"}),b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("button",{onClick:()=>u("overview"),className:"px-3 py-1 rounded text-sm "+("overview"===h?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"),children:"概要"}),b.jsx("button",{onClick:()=>u("insights"),className:"px-3 py-1 rounded text-sm "+("insights"===h?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"),children:"AIインサイト"}),b.jsx("button",{onClick:()=>u("demographics"),className:"px-3 py-1 rounded text-sm "+("demographics"===h?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"),children:"デモグラフィック"})]})]}),"overview"===h&&b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[b.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.total_responses}),b.jsx("div",{className:"text-sm text-gray-600",children:"総回答数"})]}),b.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[b.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[null==(t=x.completion_rate)?void 0:t.toFixed(1),"%"]}),b.jsx("div",{className:"text-sm text-gray-600",children:"完了率"})]}),b.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[b.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[null==(a=x.average_completion_time)?void 0:a.toFixed(1),"分"]}),b.jsx("div",{className:"text-sm text-gray-600",children:"平均時間"})]}),b.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[b.jsx("div",{className:"text-2xl font-bold text-orange-600",children:null==(l=x.response_quality_score)?void 0:l.toFixed(1)}),b.jsx("div",{className:"text-sm text-gray-600",children:"品質スコア"})]})]}),b.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[b.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"回答トレンド"}),b.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:b.jsxs("div",{className:"text-center",children:[b.jsx("i",{className:"fas fa-chart-line text-4xl mb-2"}),b.jsx("p",{children:"チャート表示エリア"}),b.jsx("p",{className:"text-sm",children:"Chart.js または D3.js で実装"})]})})]})]}),"insights"===h&&b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4",children:[b.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"🤖 AI生成インサイト"}),b.jsx("p",{className:"text-sm text-gray-600",children:"機械学習アルゴリズムが回答データを分析し、自動的にインサイトを生成しています。"})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("i",{className:"fas fa-lightbulb text-green-600 mt-1"}),b.jsxs("div",{className:"ml-3",children:[b.jsx("h5",{className:"font-medium text-green-800",children:"回答品質が向上しています"}),b.jsx("p",{className:"text-sm text-green-700 mt-1",children:"最近の回答は詳細で一貫性があり、分析に適しています。"})]})]})}),b.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("i",{className:"fas fa-chart-bar text-blue-600 mt-1"}),b.jsxs("div",{className:"ml-3",children:[b.jsx("h5",{className:"font-medium text-blue-800",children:"回答者の満足度が高い"}),b.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"感情分析の結果、回答者の80%がポジティブな感情を示しています。"})]})]})})]})]}),"demographics"===h&&b.jsx("div",{className:"space-y-6",children:b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[b.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"性別分布"}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-gray-600",children:"男性"}),b.jsx("span",{className:"text-sm font-medium",children:"45%"})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-gray-600",children:"女性"}),b.jsx("span",{className:"text-sm font-medium",children:"55%"})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"bg-pink-600 h-2 rounded-full",style:{width:"55%"}})})]})]}),b.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[b.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"年齢分布"}),b.jsx("div",{className:"space-y-2",children:[{age:"20代",percentage:30},{age:"30代",percentage:40},{age:"40代",percentage:20},{age:"50代以上",percentage:10}].map((e,s)=>b.jsxs("div",{children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-gray-600",children:e.age}),b.jsxs("span",{className:"text-sm font-medium",children:[e.percentage,"%"]})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${e.percentage}%`}})})]},s))})]})]})})]}):b.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:b.jsxs("div",{className:"text-center py-12",children:[b.jsx("i",{className:"fas fa-chart-bar text-6xl text-gray-300 mb-4"}),b.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"アンケートを選択してください"}),b.jsx("p",{className:"text-gray-600",children:"左側のリストからアンケートを選択すると、詳細な分析が表示されます。"})]})})})]})]}):b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-white text-lg mb-4",children:"データの読み込みに失敗しました"}),b.jsx("button",{onClick:()=>g(),className:"btn-primary",children:"再試行"})]})}):b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ログインが必要です"}),b.jsx("p",{className:"text-gray-600",children:"分析ダッシュボードを表示するにはログインしてください"})]})})},V=({onClose:s,dashboardData:t})=>{const[a,l]=e.useState([]),[r,i]=e.useState(""),[n,c]=e.useState(!1),d=e.useRef(null);e.useEffect(()=>{l([{id:1,type:"ai",content:"Welcome back! It's been 4 days since your last visit. Let's help you get caught up...",timestamp:new Date},{id:2,type:"ai",content:"Here is the last chart you reviewed:",timestamp:new Date,chart:{title:"SF area median rental prices 2000-2018",type:"bar",data:[{value:1200,label:"2000"},{value:1350,label:"2002"},{value:1500,label:"2004"},{value:1650,label:"2006"},{value:1800,label:"2008"},{value:1950,label:"2010"},{value:2100,label:"2012"},{value:2250,label:"2014"},{value:2400,label:"2016"},{value:2550,label:"2018"}]}},{id:3,type:"ai",content:"Here's a map just been generated for you based on your interests about San Francisco rental prices:",timestamp:new Date,map:{title:"San Francisco Rental Price Map",data:[{lat:37.7749,lng:-122.4194,price:3500,area:"Downtown"},{lat:37.7849,lng:-122.4094,price:2800,area:"Mission"},{lat:37.7649,lng:-122.4294,price:4200,area:"Marina"},{lat:37.7549,lng:-122.4394,price:3200,area:"Castro"}]}}])},[]),e.useEffect(()=>{o()},[a]);const o=()=>{var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth"})},x=async()=>{if(!r.trim())return;const e={id:Date.now(),type:"user",content:r,timestamp:new Date};l(s=>[...s,e]),i(""),c(!0),setTimeout(()=>{const e=m();l(s=>[...s,e]),c(!1)},1500)},m=e=>{const s=[{content:"Based on your current data, I can see that your revenue has increased by 12.5% this month. Would you like me to analyze the factors contributing to this growth?",insights:["Mobile traffic increased by 23%","Conversion rate improved by 0.3%","Average order value increased by 8%"]},{content:"I've identified a potential risk in your data quality metrics. The system performance risk is at 72%. Here are my recommendations:",recommendations:["Optimize database queries","Implement caching strategies","Monitor server resources"]},{content:"Your customer satisfaction score is excellent at 4.6/5! This is contributing positively to your overall business metrics.",chart:{title:"Customer Satisfaction Trend",type:"line",data:{labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Satisfaction Score",data:[4.2,4.3,4.4,4.5,4.6],borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)"}]}}}],t=s[Math.floor(Math.random()*s.length)];return{id:Date.now()+1,type:"ai",content:t.content,timestamp:new Date,...t}};return b.jsxs("div",{className:"fixed right-4 bottom-4 w-96 h-[600px] bg-white rounded-xl shadow-2xl border border-gray-200 z-50 flex flex-col",children:[b.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-xl",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center mr-3",children:b.jsx("i",{className:"fas fa-brain text-white"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold",children:"DOMO.AI"}),b.jsx("p",{className:"text-xs text-blue-100",children:"AI Assistant"})]})]}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("button",{className:"text-white hover:text-blue-200 text-sm",children:"Start Notebook"}),b.jsx("button",{onClick:s,className:"text-white hover:text-blue-200",children:b.jsx("i",{className:"fas fa-times"})})]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(e=>b.jsx("div",{className:"flex "+("user"===e.type?"justify-end":"justify-start"),children:b.jsxs("div",{className:"max-w-[80%] "+("user"===e.type?"order-2":"order-1"),children:[b.jsxs("div",{className:"p-3 rounded-lg "+("user"===e.type?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[b.jsx("p",{className:"text-sm",children:e.content}),b.jsx("div",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString()})]}),e.chart&&b.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:e.chart.title}),b.jsx("div",{className:"h-32",children:b.jsx(E,{type:e.chart.type,data:e.chart.data,height:128})})]}),e.map&&b.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:e.map.title}),b.jsx("div",{className:"h-32 bg-gray-200 rounded flex items-center justify-center",children:b.jsxs("div",{className:"text-center text-gray-600",children:[b.jsx("i",{className:"fas fa-map text-2xl mb-2"}),b.jsx("p",{className:"text-xs",children:"Interactive Map"}),b.jsxs("p",{className:"text-xs",children:["(",e.map.data.length," data points)"]})]})})]}),e.insights&&b.jsxs("div",{className:"mt-2 p-3 bg-green-50 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Key Insights:"}),b.jsx("ul",{className:"text-xs text-green-800 space-y-1",children:e.insights.map((e,s)=>b.jsxs("li",{className:"flex items-center",children:[b.jsx("i",{className:"fas fa-check-circle mr-2 text-green-600"}),e]},s))})]}),e.recommendations&&b.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Recommendations:"}),b.jsx("ul",{className:"text-xs text-blue-800 space-y-1",children:e.recommendations.map((e,s)=>b.jsxs("li",{className:"flex items-center",children:[b.jsx("i",{className:"fas fa-lightbulb mr-2 text-blue-600"}),e]},s))})]})]})},e.id)),n&&b.jsx("div",{className:"flex justify-start",children:b.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:b.jsxs("div",{className:"flex space-x-1",children:[b.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),b.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),b.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),b.jsx("div",{ref:d})]}),b.jsxs("div",{className:"p-4 border-t border-gray-200",children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())},placeholder:"Ask Domo.AI anything...",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),b.jsx("button",{onClick:x,disabled:!r.trim(),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b.jsx("i",{className:"fas fa-paper-plane"})})]}),b.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Try asking: "Show me revenue trends" or "What are the top risks?"'})]})]})},K=({data:s})=>{const[t,a]=e.useState(s),[l,r]=e.useState(!0);return e.useEffect(()=>{if(!l)return;const e=setInterval(()=>{a(e=>({...e,currentVisitors:e.currentVisitors+Math.floor(20*Math.random())-10,pageViews:e.pageViews+Math.floor(100*Math.random()),bounceRate:Math.max(0,e.bounceRate+2*(Math.random()-.5)),avgSessionDuration:Math.max(0,e.avgSessionDuration+Math.floor(20*Math.random())-10)}))},5e3);return()=>clearInterval(e)},[l]),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[b.jsx("i",{className:"fas fa-pulse mr-2 text-green-600"}),"リアルタイム分析"]}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("div",{className:"w-3 h-3 rounded-full "+(l?"bg-green-500 animate-pulse":"bg-gray-400")}),b.jsx("span",{className:"text-sm text-gray-600",children:l?"Live":"Paused"}),b.jsx("button",{onClick:()=>r(!l),className:"text-sm text-blue-600 hover:text-blue-800",children:l?"Pause":"Resume"})]})]}),b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[b.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.currentVisitors.toLocaleString()}),b.jsx("div",{className:"text-sm text-gray-600",children:"現在の訪問者"})]}),b.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.pageViews.toLocaleString()}),b.jsx("div",{className:"text-sm text-gray-600",children:"ページビュー"})]}),b.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[b.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[t.bounceRate.toFixed(1),"%"]}),b.jsx("div",{className:"text-sm text-gray-600",children:"直帰率"})]}),b.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[b.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.floor(t.avgSessionDuration/60),"分"]}),b.jsx("div",{className:"text-sm text-gray-600",children:"平均セッション時間"})]})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"トップページ"}),b.jsx("div",{className:"space-y-3",children:t.topPages.map((e,s)=>b.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:b.jsx("span",{className:"text-sm font-bold text-blue-600",children:s+1})}),b.jsxs("div",{children:[b.jsx("div",{className:"font-medium text-gray-900",children:e.page}),b.jsxs("div",{className:"text-sm text-gray-500",children:[e.views.toLocaleString()," views"]})]})]}),b.jsxs("div",{className:"text-sm font-medium "+(e.growth>0?"text-green-600":"text-red-600"),children:[e.growth>0?"+":"",e.growth,"%"]})]},s))})]}),b.jsx("div",{className:"h-64",children:b.jsx(E,{type:"line",data:[{value:800,label:"14:00"},{value:850,label:"14:05"},{value:920,label:"14:10"},{value:880,label:"14:15"},{value:950,label:"14:20"},{value:1e3,label:"14:25"},{value:1050,label:"14:30"},{value:1100,label:"14:35"},{value:1080,label:"14:40"},{value:1150,label:"14:45"},{value:1200,label:"14:50"},{value:1250,label:"14:55"},{value:1300,label:"15:00"},{value:1280,label:"15:05"},{value:1350,label:"15:10"},{value:1400,label:"15:15"},{value:1380,label:"15:20"},{value:1450,label:"15:25"},{value:1500,label:"15:30"},{value:1550,label:"15:35"}],height:256})})]})},Z=({riskData:s})=>{const[t,a]=e.useState(null),[l,r]=e.useState([]);e.useEffect(()=>{const e=s.highRiskAreas.map(e=>({name:e.area,data:Array.from({length:12},(s,t)=>{const a=e.risk,l=20*(Math.random()-.5);return Math.max(0,Math.min(100,a+l))})}));r(e)},[s]);const i=e=>e>=80?"text-red-600 bg-red-100":e>=60?"text-yellow-600 bg-yellow-100":"text-green-600 bg-green-100",n=e=>e>=80?"fas fa-exclamation-triangle":e>=60?"fas fa-exclamation-circle":"fas fa-check-circle";return b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[b.jsx("i",{className:"fas fa-shield-alt mr-2 text-red-600"}),"リスク分析"]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.highRiskAreas.map((e,s)=>b.jsxs("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md "+(t===s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>a(t===s?null:s),children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("i",{className:`${n(e.risk)} mr-2 ${i(e.risk).split(" ")[0]}`}),b.jsx("h4",{className:"font-medium text-gray-900",children:e.area})]}),b.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${i(e.risk)}`,children:[e.risk,"%"]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-600",children:"影響度:"}),b.jsx("span",{className:"font-medium "+("high"===e.impact?"text-red-600":"medium"===e.impact?"text-yellow-600":"text-green-600"),children:e.impact})]}),b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-600",children:"トレンド:"}),b.jsxs("span",{className:"font-medium flex items-center "+("increasing"===e.trend?"text-red-600":"stable"===e.trend?"text-blue-600":"text-green-600"),children:[b.jsx("i",{className:`fas fa-arrow-${"increasing"===e.trend?"up":"decreasing"===e.trend?"down":"right"} mr-1`}),e.trend]})]})]}),b.jsx("div",{className:"mt-3",children:b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(e.risk>=80?"bg-red-500":e.risk>=60?"bg-yellow-500":"bg-green-500"),style:{width:`${e.risk}%`}})})})]},s))})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"リスクトレンド (過去12ヶ月)"}),b.jsx("div",{className:"h-64",children:b.jsx(E,{type:"line",data:l.length>0?l[0].data.map((e,s)=>({value:e,label:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"][s]||`Month ${s+1}`})):[],height:256})})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[b.jsx("i",{className:"fas fa-crystal-ball mr-2 text-purple-600"}),"予測分析"]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.predictions.map((e,s)=>b.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("h4",{className:"font-medium text-gray-900",children:e.metric}),b.jsx("div",{className:"w-3 h-3 rounded-full "+("increasing"===e.prediction?"bg-green-500":"stable"===e.prediction?"bg-blue-500":"bg-red-500")})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-600",children:"予測:"}),b.jsx("span",{className:"font-medium "+("increasing"===e.prediction?"text-green-600":"stable"===e.prediction?"text-blue-600":"text-red-600"),children:e.prediction})]}),b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-600",children:"信頼度:"}),b.jsxs("span",{className:"font-medium text-gray-900",children:[e.confidence,"%"]})]}),b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx("span",{className:"text-gray-600",children:"期間:"}),b.jsx("span",{className:"font-medium text-gray-900",children:e.timeframe})]})]}),b.jsx("div",{className:"mt-3",children:b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"h-2 rounded-full bg-blue-500 transition-all duration-500",style:{width:`${e.confidence}%`}})})})]},s))})]}),null!==t&&b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"推奨アクション"}),b.jsx("div",{className:"space-y-3",children:s.highRiskAreas[t]&&b.jsxs("div",{children:[b.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:[s.highRiskAreas[t].area," の改善策"]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:H(s.highRiskAreas[t].area).map((e,s)=>b.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("i",{className:"fas fa-lightbulb text-blue-600 mt-1 mr-2"}),b.jsxs("div",{children:[b.jsx("div",{className:"font-medium text-blue-900",children:e.title}),b.jsx("div",{className:"text-sm text-blue-700 mt-1",children:e.description}),b.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:["優先度: ",e.priority," • 期間: ",e.duration]})]})]})},s))})]})})]})]})},H=e=>({"データセキュリティ":[{title:"暗号化の強化",description:"データベースの暗号化レベルを向上させ、アクセス制御を厳格化する",priority:"高",duration:"2週間"},{title:"セキュリティ監査",description:"定期的なセキュリティ監査を実施し、脆弱性を特定・修正する",priority:"高",duration:"1ヶ月"}],"システムパフォーマンス":[{title:"キャッシュ戦略の最適化",description:"Redisキャッシュの設定を最適化し、レスポンス時間を改善する",priority:"中",duration:"1週間"},{title:"データベースクエリの最適化",description:"遅いクエリを特定し、インデックスを追加してパフォーマンスを向上させる",priority:"中",duration:"2週間"}],"ユーザー離脱率":[{title:"UX改善",description:"ユーザーインターフェースを改善し、使いやすさを向上させる",priority:"高",duration:"3週間"},{title:"ページ読み込み速度の最適化",description:"画像の最適化、CDNの導入などでページ読み込み速度を改善する",priority:"中",duration:"2週間"}],"データ品質":[{title:"データ検証ルールの追加",description:"入力データの検証ルールを強化し、データ品質を向上させる",priority:"中",duration:"1週間"},{title:"データクリーニングの自動化",description:"定期的なデータクリーニングプロセスを自動化する",priority:"低",duration:"2週間"}]}[e]||[{title:"一般的な改善策",description:"この領域の具体的な改善策を検討する",priority:"中",duration:"1週間"}]),Q=()=>{const{currentUser:s,isAuthenticated:t}=y();S();const[a,l]=e.useState(null),[r,i]=e.useState(!0);e.useState("overview");const[n,c]=e.useState(!0);e.useEffect(()=>{d()},[]);const d=async()=>{try{i(!0);const s={success:!0,data:{businessMetrics:{totalRevenue:245e4,revenueGrowth:12.5,activeUsers:15420,userGrowth:8.3,conversionRate:3.2,conversionGrowth:-2.1,customerSatisfaction:4.6,satisfactionGrowth:5.2},realTimeAnalytics:{currentVisitors:1250,pageViews:45600,bounceRate:34.2,avgSessionDuration:245,topPages:[{page:"/dashboard",views:12500,growth:15.2},{page:"/analytics",views:8900,growth:8.7},{page:"/reports",views:6700,growth:-3.1},{page:"/settings",views:3200,growth:12.4}]},riskAnalysis:{highRiskAreas:[{area:"データセキュリティ",risk:85,trend:"increasing",impact:"high"},{area:"システムパフォーマンス",risk:72,trend:"stable",impact:"medium"},{area:"ユーザー離脱率",risk:68,trend:"decreasing",impact:"high"},{area:"データ品質",risk:45,trend:"stable",impact:"medium"}],predictions:[{metric:"システム負荷",prediction:"increasing",confidence:89,timeframe:"7日以内"},{metric:"ユーザー成長",prediction:"stable",confidence:76,timeframe:"30日以内"},{metric:"収益",prediction:"increasing",confidence:82,timeframe:"90日以内"}]},aiInsights:[{id:1,type:"anomaly",title:"異常なトラフィックパターンを検出",description:"午後2時から3時の間に通常の300%のトラフィック増加を検出しました。",confidence:94,impact:"high",recommendations:["サーバー容量の確認","キャッシュ戦略の見直し","負荷分散の最適化"],timestamp:(new Date).toISOString()},{id:2,type:"opportunity",title:"新規ユーザー獲得の機会",description:"モバイルユーザーの離脱率が高いため、モバイル体験の改善が推奨されます。",confidence:87,impact:"medium",recommendations:["モバイルUIの最適化","ページ読み込み速度の改善","タッチインターフェースの向上"],timestamp:(new Date).toISOString()},{id:3,type:"prediction",title:"売上予測の更新",description:"現在のトレンドに基づき、来月の売上は15%増加すると予測されます。",confidence:78,impact:"high",recommendations:["在庫の準備","マーケティングキャンペーンの計画","スタッフ配置の調整"],timestamp:(new Date).toISOString()}],dataSources:[{name:"Google Analytics",status:"connected",lastSync:"2分前",records:125e3},{name:"Salesforce CRM",status:"connected",lastSync:"5分前",records:45e3},{name:"MySQL Database",status:"connected",lastSync:"1分前",records:89e4},{name:"API Endpoints",status:"connected",lastSync:"30秒前",records:23e3}],dashboards:[{id:1,title:"Sales Dashboard",type:"metadata",summary:"Summary number",chart:"bar",data:[{value:120,label:"Jan"},{value:150,label:"Feb"},{value:180,label:"Mar"},{value:200,label:"Apr"},{value:220,label:"May"},{value:250,label:"Jun"},{value:280,label:"Jul"}],lastUpdated:"2時間前"},{id:2,title:"Traffic by Channel",type:"previous quarter",summary:"25.5k visitors",chart:"pie",data:[{value:45,label:"Organic"},{value:30,label:"Direct"},{value:15,label:"Social"},{value:10,label:"Email"}],lastUpdated:"1時間前"},{id:3,title:"Marketing Funnel App",type:"45 users • 3 active",summary:"Funnel visualization",chart:"bar",data:[{value:100,label:"Awareness"},{value:75,label:"Interest"},{value:50,label:"Consideration"},{value:25,label:"Intent"},{value:10,label:"Purchase"}],lastUpdated:"30分前"},{id:4,title:"Pricing Models",type:"Last updated yesterday",summary:"Jupyter notebook",chart:"line",data:[{value:85,label:"Model A"},{value:92,label:"Model B"},{value:78,label:"Model C"},{value:95,label:"Model D"}],lastUpdated:"1日前"}],trends:{revenue:{"2024-01":21e5,"2024-02":22e5,"2024-03":23e5,"2024-04":24e5,"2024-05":245e4},users:{"2024-01":12e3,"2024-02":13e3,"2024-03":14e3,"2024-04":15e3,"2024-05":15420},conversion:{"2024-01":3.5,"2024-02":3.4,"2024-03":3.3,"2024-04":3.2,"2024-05":3.2}}}};try{const e=await fetch("/api/domo/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();if(s.success)return void l(s.data)}}catch(e){console.log("API not available, using mock data")}l(s.data)}catch(s){console.error("Failed to fetch Domo data:",s)}finally{i(!1)}};return r?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"loading-spinner mx-auto mb-4"}),b.jsx("p",{className:"text-white text-lg",children:"Domo.AI データを読み込み中..."}),b.jsx("p",{className:"text-white text-sm mt-2",children:"AI分析エンジンを初期化しています..."})]})}):a?b.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 relative",children:[b.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-lg border-b border-white border-opacity-20",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mr-3",children:b.jsx("i",{className:"fas fa-brain text-white text-lg"})}),b.jsx("h1",{className:"text-2xl font-bold text-white",children:"Domo.AI"})]}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsxs("button",{onClick:()=>c(!n),className:"bg-white bg-opacity-10 hover:bg-opacity-20 text-white px-4 py-2 rounded-lg transition-colors",children:[b.jsx("i",{className:"fas fa-comments mr-2"}),"AI Assistant"]}),b.jsxs("div",{className:"text-white",children:[b.jsxs("div",{className:"text-sm",children:["Welcome back, ",(null==s?void 0:s.name)||"User"]}),b.jsx("div",{className:"text-xs text-gray-300",children:"It's been 4 days since your last visit"})]})]})]})})}),b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 mb-8 text-white",children:b.jsx("p",{className:"text-lg leading-relaxed",children:"AIを活用したリアルタイムデータ分析、リスク領域の特定、予測分析による意思決定の加速、 リアルタイムのインサイトとAIモデルを活用したダッシュボードを統合し、 組織全体でデータドリブンな意思決定を可能にするAIツールです。"})}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Visualize"}),b.jsx("i",{className:"fas fa-chart-line text-blue-600 text-xl"})]}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"データを視覚化して分析"}),b.jsx("button",{className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Open Editor"})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Dashboard"}),b.jsx("i",{className:"fas fa-plus-square text-green-600 text-xl"})]}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"新しいダッシュボードを作成"}),b.jsx("button",{className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Open Editor"})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Connect Data"}),b.jsx("i",{className:"fas fa-cloud text-purple-600 text-xl"})]}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"クラウドデータソースに接続"}),b.jsx("button",{className:"w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Browse Connectors"})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Watch Demo"}),b.jsx("i",{className:"fas fa-play text-red-600 text-xl"})]}),b.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Domo デモの概要"}),b.jsx("button",{className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Watch Now"})]})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[b.jsx(T,{title:"総収益",value:`¥${(a.businessMetrics.totalRevenue/1e6).toFixed(1)}M`,change:`+${a.businessMetrics.revenueGrowth}%`,changeType:"positive",icon:b.jsx("i",{className:"fas fa-yen-sign"}),color:"success",subtitle:"前年同期比"}),b.jsx(T,{title:"アクティブユーザー",value:a.businessMetrics.activeUsers.toLocaleString(),change:`+${a.businessMetrics.userGrowth}%`,changeType:"positive",icon:b.jsx("i",{className:"fas fa-users"}),color:"primary",subtitle:"月間アクティブユーザー"}),b.jsx(T,{title:"コンバージョン率",value:`${a.businessMetrics.conversionRate}%`,change:`${a.businessMetrics.conversionGrowth}%`,changeType:"negative",icon:b.jsx("i",{className:"fas fa-percentage"}),color:"warning",subtitle:"全チャネル平均"}),b.jsx(T,{title:"顧客満足度",value:`${a.businessMetrics.customerSatisfaction}/5`,change:`+${a.businessMetrics.satisfactionGrowth}%`,changeType:"positive",icon:b.jsx("i",{className:"fas fa-star"}),color:"info",subtitle:"NPS スコア"})]}),b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:a.dashboards.map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsxs("div",{className:"flex justify-between items-start mb-4",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),b.jsx("p",{className:"text-sm text-gray-500",children:e.type})]}),b.jsx("span",{className:"text-xs text-gray-400",children:e.lastUpdated})]}),b.jsx("div",{className:"mb-4",children:b.jsx(E,{type:e.chart,data:e.data,height:200})}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-gray-600",children:e.summary}),b.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[b.jsx("i",{className:`fas fa-${"bar"===e.chart?"chart-bar":"pie"===e.chart?"chart-pie":"code"} mr-1`}),"bar"===e.chart||"pie"===e.chart?"Chart":"Jupyter"]})]})]},e.id))}),b.jsx(K,{data:a.realTimeAnalytics}),b.jsx(Z,{riskData:a.riskAnalysis}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[b.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[b.jsx("i",{className:"fas fa-brain mr-2 text-purple-600"}),"AI インサイト"]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.aiInsights.map(e=>b.jsxs("div",{className:"p-4 rounded-lg border-l-4 "+("anomaly"===e.type?"border-red-500 bg-red-50":"opportunity"===e.type?"border-green-500 bg-green-50":"border-blue-500 bg-blue-50"),children:[b.jsxs("div",{className:"flex justify-between items-start mb-2",children:[b.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),b.jsxs("span",{className:"text-xs px-2 py-1 rounded "+("high"===e.impact?"bg-red-100 text-red-800":"medium"===e.impact?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.impact," impact"]})]}),b.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),b.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:["信頼度: ",e.confidence,"% • ",new Date(e.timestamp).toLocaleString()]}),b.jsx("div",{className:"space-y-1",children:e.recommendations.slice(0,2).map((e,s)=>b.jsxs("div",{className:"text-xs text-gray-600 flex items-center",children:[b.jsx("i",{className:"fas fa-arrow-right mr-1 text-gray-400"}),e]},s))})]},e.id))})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"データソース"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.dataSources.map((e,s)=>b.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("div",{className:"font-medium text-gray-900",children:e.name}),b.jsx("div",{className:"w-2 h-2 rounded-full "+("connected"===e.status?"bg-green-500":"bg-red-500")})]}),b.jsxs("div",{className:"text-sm text-gray-500",children:["最終同期: ",e.lastSync]}),b.jsxs("div",{className:"text-sm text-gray-500",children:["レコード数: ",e.records.toLocaleString()]})]},s))})]})]}),n&&b.jsx(V,{onClose:()=>c(!1),dashboardData:a})]}):b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-white text-lg mb-4",children:"データの読み込みに失敗しました"}),b.jsx("button",{onClick:()=>d(),className:"btn-primary",children:"再試行"})]})})},Y=()=>{r();const{currentUser:s,isAuthenticated:t,addPoints:l,completeSurvey:i}=y(),n=a(),[c,d]=e.useState(0),[o,x]=e.useState({}),[m,h]=e.useState(!1);if(!t)return b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ログインが必要です"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"アンケートに回答するにはログインしてください"})]})});const u={id:"survey_1",title:"スマートフォンアプリの使用状況調査",description:"日常的に使用しているアプリについて教えてください",category:"テクノロジー",points:50,estimatedTime:5,questions:[{id:1,question:"あなたが最もよく使用するスマートフォンアプリは何ですか？",type:"single",options:["LINE","Instagram","Twitter","TikTok","YouTube","その他"]},{id:2,question:"1日にスマートフォンを使用する時間はどのくらいですか？",type:"single",options:["1時間未満","1-3時間","3-5時間","5-8時間","8時間以上"]},{id:3,question:"アプリを選ぶ際に重視する要素は？（複数選択可）",type:"multiple",options:["使いやすさ","デザイン","機能性","セキュリティ","価格","レビュー評価"]}]},g=(e,s)=>{x(t=>({...t,[e]:s}))},p=()=>{n("/dashboard")};if(m)return b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:b.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx("i",{className:"fas fa-check text-2xl text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"アンケート完了！"}),b.jsx("p",{className:"text-gray-600 mb-4",children:"ご協力ありがとうございました"}),b.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:b.jsxs("p",{className:"text-green-800 font-semibold",children:["+",u.points,"ポイント獲得"]})}),b.jsx("button",{onClick:p,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"ダッシュボードに戻る"})]})});const j=u.questions[c];return b.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:u.category}),b.jsxs("span",{className:"text-lg font-bold text-green-600",children:[u.points,"pt"]})]}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:u.title}),b.jsx("p",{className:"text-gray-600 mb-4",children:u.description}),b.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-clock mr-1"}),u.estimatedTime,"分"]}),b.jsxs("span",{children:[b.jsx("i",{className:"fas fa-question-circle mr-1"}),u.questions.length,"問"]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-medium text-gray-700",children:"進捗"}),b.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[c+1," / ",u.questions.length]})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:(c+1)/u.questions.length*100+"%"}})})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:j.question}),b.jsx("div",{className:"space-y-3",children:j.options.map((e,s)=>{var t;return b.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer",children:[b.jsx("input",{type:"multiple"===j.type?"checkbox":"radio",name:`question_${j.id}`,value:e,checked:"multiple"===j.type?(null==(t=o[j.id])?void 0:t.includes(e))||!1:o[j.id]===e,onChange:s=>{if("multiple"===j.type){const t=o[j.id]||[],a=s.target.checked?[...t,e]:t.filter(s=>s!==e);g(j.id,a)}else g(j.id,e)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),b.jsx("span",{className:"text-gray-900",children:e})]},s)})}),b.jsxs("div",{className:"flex justify-between mt-8",children:[b.jsxs("button",{onClick:()=>{c>0&&d(c-1)},disabled:0===c,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[b.jsx("i",{className:"fas fa-arrow-left mr-2"}),"前へ"]}),b.jsxs("button",{onClick:()=>{c<u.questions.length-1?d(c+1):(h(!0),l(u.points),i(u.id))},disabled:!o[j.id]||Array.isArray(o[j.id])&&0===o[j.id].length,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[c===u.questions.length-1?"完了":"次へ",b.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]})]})]})},X=()=>{const[s,t]=e.useState(!1),[a,l]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("cookie-consent");e?l("accepted"===e):t(!0)},[]);const r=()=>{"undefined"!=typeof gtag&&gtag("consent","update",{analytics_storage:"granted"}),fetch("/api/analytics/consent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consent:!0,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})},i=()=>{"undefined"!=typeof gtag&&gtag("consent","update",{analytics_storage:"denied"}),console.log("Analytics disabled - using privacy-first approach")};return s?b.jsx("div",{className:"cookie-banner",role:"banner","aria-live":"polite",children:b.jsxs("div",{className:"cookie-consent",children:[b.jsx("div",{className:"cookie-text",children:b.jsxs("p",{children:[b.jsx("strong",{children:"プライバシー保護について"}),b.jsx("br",{}),"当サイトでは、サードパーティクッキーを使用せず、プライバシーを重視した分析を行います。 データは匿名化され、個人を特定できない形で収集されます。"]})}),b.jsxs("div",{className:"cookie-buttons",children:[b.jsx("button",{onClick:()=>{localStorage.setItem("cookie-consent","accepted"),l(!0),t(!1),r()},className:"cookie-accept","aria-label":"分析データの収集に同意する",children:"同意する"}),b.jsx("button",{onClick:()=>{localStorage.setItem("cookie-consent","declined"),l(!1),t(!1),i()},className:"cookie-decline","aria-label":"分析データの収集を拒否する",children:"拒否する"})]})]})}):null};function ee(){return b.jsx(I,{children:b.jsx(w,{children:b.jsx(i,{children:b.jsxs("div",{className:"min-h-screen",children:[b.jsx(C,{}),b.jsx("main",{children:b.jsxs(n,{children:[b.jsx(c,{path:"/",element:b.jsx(D,{})}),b.jsx(c,{path:"/login",element:b.jsx(M,{})}),b.jsx(c,{path:"/register",element:b.jsx(A,{})}),b.jsx(c,{path:"/surveys",element:b.jsx($,{})}),b.jsx(c,{path:"/category/:category",element:b.jsx(P,{})}),b.jsx(c,{path:"/dashboard",element:b.jsx(O,{})}),b.jsx(c,{path:"/analytics",element:b.jsx(z,{})}),b.jsx(c,{path:"/domo-ai",element:b.jsx(Q,{})}),b.jsx(c,{path:"/survey/:id",element:b.jsx(Y,{})})]})}),b.jsx(_,{}),b.jsx(X,{})]})})})})}f.createRoot(document.getElementById("root")).render(b.jsx(t.StrictMode,{children:b.jsx(ee,{})}));
